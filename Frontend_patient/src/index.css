@import "tailwindcss";

/* Configuration Tailwind v4 - Dark mode avec classe */
@theme {
  --color-scheme: light;
}

/* S'assurer que le dark mode utilise la classe 'dark' */
@media (prefers-color-scheme: dark) {
  /* Ne rien faire - on veut utiliser uniquement la classe 'dark' */
}

/* ===== CSS VARIABLES ===== */
/* Palette IIM - Thème clair */
:root {
  /* Backgrounds */
  --color-bg-primary: #FCFCF7; /* Fond */
  --color-bg-secondary: #FFFFFF; /* Cartes */
  --color-bg-card: #FFFFFF; /* Cartes */
  
  /* Text */
  --color-text-primary: #263238; /* Couleur Texte */
  --color-text-secondary: #546E7A; /* Texte secondaire */
  --color-text-muted: #78909C; /* Texte muted */
  
  /* Borders */
  --color-border: #E0E0E0; /* Bordures */
  
  /* Accents */
  --color-accent-1: #FFE082; /* Accentuation 1 (jaune) */
  --color-accent-2: #E63946; /* Accentuation 2 (rouge corail) */
  --color-secondary: #43A78B; /* Couleur secondaire (teal) */
  
  /* Semantic colors */
  --color-accent: #43A78B; /* Utilisé comme accent principal (teal) */
  --color-accent-hover: #2E7D6B; /* Hover pour accent */
  --color-danger: #E63946; /* Accentuation 2 pour danger */
  --color-success: #43A78B; /* Couleur secondaire pour success */
  --color-warning: #FFE082; /* Accentuation 1 pour warning */
  
  /* Spacing */
  --spacing-base: 16px;
  --radius-base: 8px;
}

/* Palette IIM - Thème sombre */
.dark {
  /* Backgrounds - Variantes sombres basées sur la charte */
  --color-bg-primary: #0F0F0F; /* Fond sombre */
  --color-bg-secondary: #1E1E1E; /* Cartes sombres - Variante assombrie de #263238 */
  --color-bg-card: #2A2A2A; /* Cartes sombres - Variante assombrie de #263238 */
  
  /* Text */
  --color-text-primary: #FFFFFF; /* Texte blanc */
  --color-text-secondary: #B0BEC5; /* Texte secondaire clair */
  --color-text-muted: #90A4AE; /* Texte muted clair */
  
  /* Borders - Variante sombre de #E0E0E0 avec transparence */
  --color-border: rgba(224, 224, 224, 0.15); /* Bordures sombres - Variante de #E0E0E0 */
  
  /* Accents (versions plus claires pour le thème sombre) */
  --color-accent-1: #FFD54F; /* Accentuation 1 (jaune plus clair) */
  --color-accent-2: #EF5350; /* Accentuation 2 (rouge plus clair) */
  --color-secondary: #4DB6AC; /* Couleur secondaire (teal plus clair) */
  
  /* Semantic colors */
  --color-accent: #4DB6AC; /* Accent principal (teal clair) */
  --color-accent-hover: #26A69A; /* Hover pour accent */
  --color-danger: #EF5350; /* Danger (rouge clair) */
  --color-success: #4DB6AC; /* Success (teal clair) */
  --color-warning: #FFD54F; /* Warning (jaune clair) */
}

/* ===== BASE STYLES ===== */
@layer base {
  html {
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    color-scheme: light;
    /* Empêche le zoom du navigateur de déclencher le responsive */
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
  }
  
  html.dark {
    color-scheme: dark;
  }

  body {
    background-color: #FCFCF7 !important; /* Fond - Palette IIM */
    color: #263238 !important; /* Couleur Texte - Palette IIM */
    margin: 0;
    padding: 0;
    min-height: 100vh;
    /* Force la version desktop sur PC même en zoom */
    min-width: 1280px !important;
    overflow-x: auto;
  }
  
  html.dark body {
    background-color: #0F0F0F !important; /* Fond sombre */
    color: #FFFFFF !important; /* Texte blanc */
  }

  /* Forcer le root element */
  #root {
    background-color: #FCFCF7 !important; /* Fond - Palette IIM */
    color: #263238 !important; /* Couleur Texte - Palette IIM */
    min-height: 100vh;
    min-width: 1280px !important;
  }
  
  html.dark #root {
    background-color: #0F0F0F !important; /* Fond sombre */
    color: #FFFFFF !important; /* Texte blanc */
  }

  /* Force version desktop sur les appareils avec souris (PC) */
  @media (pointer: fine) {
    body, #root {
      min-width: 1280px !important;
    }
    
    /* Désactive tous les breakpoints responsive sur PC */
    .lg\:hidden, .md\:hidden, .sm\:hidden {
      display: block !important;
    }
    
    .hidden {
      display: none !important;
    }
  }
}

/* ===== VARIABLES CSS POUR LE THÈME ===== */
/* Utiliser des variables CSS pour le thème - Palette IIM */
html {
  --bg-primary: #FCFCF7; /* Fond */
  --bg-secondary: #FFFFFF; /* Cartes */
  --bg-card: #FFFFFF; /* Cartes */
  --text-primary: #263238; /* Couleur Texte */
  --text-secondary: #546E7A; /* Texte secondaire */
  --text-muted: #78909C; /* Texte muted */
  --border-color: #E0E0E0; /* Bordures */
  --accent-color: #43A78B; /* Couleur secondaire (teal) */
  --accent-hover-color: #2E7D6B; /* Hover */
  --accent-1: #FFE082; /* Accentuation 1 (jaune) */
  --accent-2: #E63946; /* Accentuation 2 (rouge) */
  --danger-color: #E63946; /* Danger */
  --success-color: #43A78B; /* Success */
  --warning-color: #FFE082; /* Warning */
}

html.dark {
  --bg-primary: #0F0F0F; /* Fond sombre */
  --bg-secondary: #1E1E1E; /* Cartes sombres - Variante de #263238 */
  --bg-card: #2A2A2A; /* Cartes sombres - Variante de #263238 */
  --text-primary: #FFFFFF; /* Texte blanc */
  --text-secondary: #B0BEC5; /* Texte secondaire clair */
  --text-muted: #90A4AE; /* Texte muted clair */
  --border-color: rgba(224, 224, 224, 0.15); /* Bordures sombres - Variante de #E0E0E0 */
  --accent-color: #4DB6AC; /* Couleur secondaire (teal clair) */
  --accent-hover-color: #26A69A; /* Hover */
  --accent-1: #FFD54F; /* Accentuation 1 (jaune clair) */
  --accent-2: #EF5350; /* Accentuation 2 (rouge clair) */
  --danger-color: #EF5350; /* Danger */
  --success-color: #4DB6AC; /* Success */
  --warning-color: #FFD54F; /* Warning */
}

/* ===== RÈGLES GLOBALES POUR AMÉLIORER LE CONTRASTE EN MODE CLAIR ===== */
/* Forcer des couleurs plus contrastées pour une meilleure visibilité */

/* Titres - Palette IIM */
html:not(.dark) h1,
html:not(.dark) h2,
html:not(.dark) h3,
html:not(.dark) h4,
html:not(.dark) h5,
html:not(.dark) h6 {
  color: #263238 !important; /* Couleur Texte - Palette IIM */
  font-weight: 600 !important;
}

/* Textes avec classes Tailwind - Palette IIM */
html:not(.dark) [class*="text-gray-900"],
html:not(.dark) [class*="text-gray-800"],
html:not(.dark) [class*="text-gray-700"] {
  color: #263238 !important; /* Couleur Texte - Palette IIM */
}

html:not(.dark) [class*="text-gray-600"],
html:not(.dark) [class*="text-gray-500"] {
  color: #546E7A !important; /* Texte secondaire - Palette IIM */
}

html:not(.dark) [class*="text-gray-400"] {
  color: #78909C !important; /* Texte muted - Palette IIM */
}

html:not(.dark) [class*="text-white"],
html:not(.dark) [class*="text-gray-300"],
html:not(.dark) [class*="text-gray-200"] {
  color: #263238 !important; /* Forcer le texte clair à utiliser la couleur texte */
}

/* Backgrounds sombres -> Palette IIM en mode clair */
html:not(.dark) [class*="bg-gray-800"],
html:not(.dark) [class*="bg-gray-900"],
html:not(.dark) [class*="bg-gray-950"] {
  background-color: #FFFFFF !important; /* Cartes - Palette IIM */
}

html:not(.dark) [class*="bg-gray-700"] {
  background-color: #FCFCF7 !important; /* Fond - Palette IIM */
}

/* Forcer les backgrounds en mode clair - Palette IIM */
html:not(.dark) [class*="bg-\[#FCFCF7\]"] {
  background-color: #FCFCF7 !important; /* Fond - Palette IIM */
}

html:not(.dark) [class*="bg-\[#0F0F0F\]"] {
  background-color: #FCFCF7 !important; /* Forcer fond clair */
}

html:not(.dark) [class*="bg-\[#1A1A1A\]"],
html:not(.dark) [class*="bg-\[#1F2937\]"],
html:not(.dark) [class*="bg-\[#1E1E1E\]"],
html:not(.dark) [class*="bg-\[#2A2A2A\]"] {
  background-color: #FFFFFF !important; /* Forcer cartes claires */
}

/* Forcer les backgrounds en mode sombre */
html.dark [class*="bg-\[#FCFCF7\]"] {
  background-color: #0F0F0F !important; /* Fond sombre */
}

html.dark [class*="bg-\[#0F0F0F\]"] {
  background-color: #0F0F0F !important; /* Fond sombre */
}

html.dark [class*="bg-white"]:not([class*="dark:bg-"]) {
  background-color: #2A2A2A !important; /* Cartes sombres par défaut - Variante de #263238 */
}

html.dark [class*="bg-\[#1A1A1A\]"],
html.dark [class*="bg-\[#1E1E1E\]"] {
  background-color: #1E1E1E !important; /* Cartes sombres - Variante de #263238 */
}

html.dark [class*="bg-\[#1F2937\]"],
html.dark [class*="bg-\[#2A2A2A\]"] {
  background-color: #2A2A2A !important; /* Cartes sombres - Variante de #263238 */
}

/* Améliorer les contrastes en mode sombre */
html.dark {
  --color-bg-primary: #0F0F0F !important;
  --color-bg-secondary: #1E1E1E !important; /* Variante de #263238 */
  --color-bg-card: #2A2A2A !important; /* Variante de #263238 */
  --color-text-primary: #FFFFFF !important;
  --color-text-secondary: #B0BEC5 !important;
  --color-text-muted: #90A4AE !important;
  --color-border: rgba(224, 224, 224, 0.15) !important; /* Variante de #E0E0E0 */
}

/* Forcer les textes en mode sombre pour meilleur contraste */
html.dark [class*="text-\[#263238\]"] {
  color: #FFFFFF !important; /* Texte blanc en dark mode */
}

html.dark [class*="text-\[#546E7A\]"] {
  color: #B0BEC5 !important; /* Texte secondaire clair */
}

html.dark [class*="text-\[#78909C\]"] {
  color: #90A4AE !important; /* Texte muted clair */
}

/* Forcer les textes en mode clair */
html:not(.dark) [class*="text-\[#FFFFFF\]"] {
  color: #263238 !important; /* Texte sombre en light mode */
}

html:not(.dark) [class*="text-\[#B0BEC5\]"] {
  color: #546E7A !important; /* Texte secondaire */
}

html:not(.dark) [class*="text-\[#90A4AE\]"] {
  color: #78909C !important; /* Texte muted */
}

/* Bordures - Palette IIM */
html:not(.dark) [class*="border-gray-700"],
html:not(.dark) [class*="border-gray-800"] {
  border-color: #E0E0E0 !important; /* Bordures - Palette IIM */
}

/* Spécifique pour les éléments avec dark: dans les classes */
html:not(.dark) [class*="dark:text-white"] {
  color: #263238 !important; /* Couleur Texte - Palette IIM */
}

html:not(.dark) [class*="dark:text-gray-400"] {
  color: #78909C !important; /* Texte muted - Palette IIM */
}

html:not(.dark) [class*="dark:text-gray-300"] {
  color: #546E7A !important; /* Texte secondaire - Palette IIM */
}

html:not(.dark) [class*="dark:bg-gray-800"],
html:not(.dark) [class*="dark:bg-gray-900"] {
  background-color: #FFFFFF !important; /* Cartes - Palette IIM */
}

html:not(.dark) [class*="dark:border-gray-700"],
html:not(.dark) [class*="dark:border-gray-800"] {
  border-color: #E0E0E0 !important; /* Bordures - Palette IIM */
}

/* Couleurs bleues -> Teal (accent principal) - Palette IIM */
html:not(.dark) [class*="text-blue-600"],
html:not(.dark) [class*="text-blue-500"] {
  color: #43A78B !important; /* Couleur secondaire (teal) - Palette IIM */
}

html:not(.dark) [class*="bg-blue-600"],
html:not(.dark) [class*="bg-blue-500"] {
  background-color: #43A78B !important; /* Couleur secondaire (teal) - Palette IIM */
}

html:not(.dark) [class*="bg-blue-50"],
html:not(.dark) [class*="bg-blue-100"] {
  background-color: rgba(67, 167, 139, 0.1) !important; /* Teal avec transparence */
}

html:not(.dark) [class*="hover:bg-blue-700"],
html:not(.dark) [class*="hover:bg-blue-600"] {
  background-color: #2E7D6B !important; /* Teal foncé - Palette IIM */
}

html:not(.dark) [class*="hover:text-blue-500"],
html:not(.dark) [class*="hover:text-blue-600"] {
  color: #43A78B !important; /* Couleur secondaire (teal) - Palette IIM */
}

html:not(.dark) [class*="border-blue-200"],
html:not(.dark) [class*="border-blue-300"] {
  border-color: rgba(67, 167, 139, 0.3) !important; /* Teal avec transparence */
}

/* Couleurs rouges -> Accentuation 2 - Palette IIM */
html:not(.dark) [class*="text-red-600"],
html:not(.dark) [class*="text-red-500"] {
  color: #E63946 !important; /* Accentuation 2 - Palette IIM */
}

html:not(.dark) [class*="bg-red-600"],
html:not(.dark) [class*="bg-red-500"] {
  background-color: #E63946 !important; /* Accentuation 2 - Palette IIM */
}

html:not(.dark) [class*="bg-red-50"],
html:not(.dark) [class*="bg-red-100"] {
  background-color: rgba(230, 57, 70, 0.1) !important; /* Rouge avec transparence */
}

html:not(.dark) [class*="hover:bg-red-700"],
html:not(.dark) [class*="hover:bg-red-600"] {
  background-color: #C62828 !important; /* Rouge foncé */
}

html:not(.dark) [class*="hover:text-red-600"] {
  color: #E63946 !important; /* Accentuation 2 - Palette IIM */
}

html:not(.dark) [class*="border-red-200"],
html:not(.dark) [class*="border-red-300"] {
  border-color: rgba(230, 57, 70, 0.3) !important; /* Rouge avec transparence */
}

/* Règles supplémentaires pour forcer les backgrounds en mode clair */
html:not(.dark) .flex.h-screen[class*="bg-\[#FCFCF7\]"],
html:not(.dark) .flex.h-screen[class*="bg-\[#0F0F0F\]"] {
  background-color: #FCFCF7 !important;
}

html:not(.dark) .flex.flex-col[class*="bg-\[#FCFCF7\]"],
html:not(.dark) .flex.flex-col[class*="bg-\[#0F0F0F\]"] {
  background-color: #FCFCF7 !important;
}

html:not(.dark) div[class*="bg-\[#FCFCF7\]"],
html:not(.dark) div[class*="bg-\[#0F0F0F\]"] {
  background-color: #FCFCF7 !important;
}

html:not(.dark) div[class*="bg-\[#1A1A1A\]"],
html:not(.dark) div[class*="bg-\[#1F2937\]"],
html:not(.dark) div[class*="bg-\[#1E1E1E\]"],
html:not(.dark) div[class*="bg-\[#2A2A2A\]"] {
  background-color: #FFFFFF !important;
}

/* Règles supplémentaires pour forcer les backgrounds en mode sombre */
html.dark .flex.h-screen[class*="bg-\[#FCFCF7\]"],
html.dark .flex.h-screen[class*="bg-\[#0F0F0F\]"] {
  background-color: #0F0F0F !important;
}

html.dark .flex.flex-col[class*="bg-\[#FCFCF7\]"],
html.dark .flex.flex-col[class*="bg-\[#0F0F0F\]"] {
  background-color: #0F0F0F !important;
}

html.dark div[class*="bg-\[#FCFCF7\]"],
html.dark div[class*="bg-\[#0F0F0F\]"] {
  background-color: #0F0F0F !important;
}

html.dark div[class*="bg-\[#1A1A1A\]"],
html.dark div[class*="bg-\[#1E1E1E\]"] {
  background-color: #1E1E1E !important; /* Variante de #263238 */
}

html.dark div[class*="bg-\[#1F2937\]"],
html.dark div[class*="bg-\[#2A2A2A\]"] {
  background-color: #2A2A2A !important; /* Variante de #263238 */
}

/* Améliorer les contrastes pour les textes en dark mode */
html.dark h1, html.dark h2, html.dark h3, html.dark h4, html.dark h5, html.dark h6 {
  color: #FFFFFF !important;
}

html.dark p, html.dark span, html.dark div {
  color: inherit;
}

/* Mono font for time/codes */
.font-mono {
  font-family: 'JetBrains Mono', monospace;
}

/* Focus styles for accessibility - Palette IIM */
*:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px #fff, 0 0 0 4px #43A78B; /* Couleur secondaire - Palette IIM */
}

html.dark *:focus-visible {
  box-shadow: 0 0 0 2px #2A2A2A, 0 0 0 4px #4DB6AC; /* Teal clair pour le sombre - Variante de #263238 */
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background-color: #F3F4F6;
}

html.dark ::-webkit-scrollbar-track {
  background-color: #2A2A2A; /* Variante de #263238 */
}

::-webkit-scrollbar-thumb {
  background-color: #D1D5DB;
  border-radius: 9999px;
}

html.dark ::-webkit-scrollbar-thumb {
  background-color: rgba(224, 224, 224, 0.3); /* Variante de #E0E0E0 */
}

::-webkit-scrollbar-thumb:hover {
  background-color: #9CA3AF;
}

html.dark ::-webkit-scrollbar-thumb:hover {
  background-color: #6B7280;
}

/* Selection - Palette IIM */
::selection {
  background-color: rgba(67, 167, 139, 0.3); /* Couleur secondaire (teal) avec transparence */
  color: #263238; /* Couleur Texte - Palette IIM */
}

html.dark ::selection {
  background-color: rgba(77, 182, 172, 0.3); /* Teal clair avec transparence */
  color: #FFFFFF; /* Texte blanc */
}

/* ===== COMPONENT STYLES ===== */
@layer components {
  /* Card hover effect */
  .card-hover {
    @apply transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5;
  }

  /* Button press effect */
  .btn-press {
    @apply active:scale-[0.98] transition-transform;
  }

  /* Glass effect */
  .glass {
    @apply bg-white/80 dark:bg-gray-800/80 backdrop-blur-md;
  }

  /* Gradient text */
  .gradient-text {
    @apply bg-gradient-to-r from-cyan-500 to-teal-500 bg-clip-text text-transparent;
  }

  /* Status badges - Palette IIM */
  .badge-confirmed {
    background-color: rgba(67, 167, 139, 0.2); /* Couleur secondaire (teal) */
    color: #2E7D6B; /* Teal foncé */
  }
  html.dark .badge-confirmed {
    background-color: rgba(77, 182, 172, 0.3); /* Teal clair avec transparence */
    color: #4DB6AC; /* Teal clair */
  }

  .badge-pending {
    background-color: rgba(255, 224, 130, 0.3); /* Accentuation 1 (jaune) */
    color: #F57C00; /* Jaune foncé */
  }
  html.dark .badge-pending {
    background-color: rgba(255, 213, 79, 0.3); /* Jaune clair avec transparence */
    color: #FFD54F; /* Jaune clair */
  }

  .badge-cancelled {
    background-color: #F5F5F5; /* Gris clair */
    color: #546E7A; /* Texte secondaire */
  }
  html.dark .badge-cancelled {
    background-color: #2A2A2A; /* Variante de #263238 */
    color: #90A4AE; /* Texte muted clair */
  }

  .badge-doctor {
    background-color: rgba(67, 167, 139, 0.2); /* Couleur secondaire (teal) */
    color: #2E7D6B; /* Teal foncé */
  }
  html.dark .badge-doctor {
    background-color: rgba(77, 182, 172, 0.3); /* Teal clair avec transparence */
    color: #4DB6AC; /* Teal clair */
  }
}

/* ===== ANIMATIONS ===== */
@layer utilities {
  /* Modal enter animation */
  @keyframes modal-enter {
    from {
      opacity: 0;
      transform: scale(0.95) translateY(-10px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  .animate-modal-enter {
    animation: modal-enter 0.2s ease-out;
  }

  /* Slide in animation */
  @keyframes slide-in {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .animate-slide-in {
    animation: slide-in 0.3s ease-out;
  }

  /* Fade in animation */
  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .animate-fade-in {
    animation: fade-in 0.2s ease-out;
  }

  /* Pulse subtle */
  @keyframes pulse-subtle {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }

  .animate-pulse-subtle {
    animation: pulse-subtle 2s ease-in-out infinite;
  }

  /* Bounce in */
  @keyframes bounce-in {
    0% {
      opacity: 0;
      transform: scale(0.3);
    }
    50% {
      opacity: 1;
      transform: scale(1.05);
    }
    70% {
      transform: scale(0.9);
    }
    100% {
      transform: scale(1);
    }
  }

  .animate-bounce-in {
    animation: bounce-in 0.4s ease-out;
  }
}

/* ===== ACCESSIBILITY ===== */
/* Screen reader only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Skip link - Palette IIM */
.skip-link {
  @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:rounded-lg;
  background-color: #43A78B !important; /* Couleur secondaire (teal) - Palette IIM */
  color: white !important;
}

html.dark .skip-link {
  background-color: #4DB6AC !important; /* Teal clair */
  color: white !important;
}

/* High contrast focus for form elements - Palette IIM */
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  @apply ring-2 border-transparent;
  --tw-ring-color: #43A78B; /* Couleur secondaire (teal) - Palette IIM */
}

html.dark input:focus-visible,
html.dark select:focus-visible,
html.dark textarea:focus-visible {
  --tw-ring-color: #4DB6AC; /* Teal clair */
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ===== PRINT STYLES ===== */
@media print {
  body {
    @apply bg-white text-black;
  }

  .no-print {
    display: none !important;
  }
}
